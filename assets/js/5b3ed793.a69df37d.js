(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[381],{7411:()=>{},28453:(e,n,t)=>{"use strict";t.d(n,{R:()=>r,x:()=>o});var s=t(96540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}},28825:()=>{},67992:()=>{},72929:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});const s=t.p+"assets/files/api-6c5589adabe9ce65491267456174cdd1.yaml"},75434:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var s=t(98587),i=t(96540),a=t(2151),r=t(37911),o=t(33540),l=(t(94878),t(28794)),d=t(99563),c=t(74848),h=["id","spec","example","pointer"];const p=function(e){var n=e.id,t=e.spec,p=e.example,u=void 0!==p&&p,m=e.pointer,g=(0,s.A)(e,h),x=(0,a.A)(n,t),f=(0,d.r)(x).store,b="#"===m.charAt(0)?m.substring(1):m,k=f.menu.flatItems.find((function(e){return e instanceof l.OperationModel&&e.pointer===b}));if(!k)throw new Error('Failed to resolve reference "'+m+'"');return(0,i.useEffect)((function(){f.menu.dispose()}),[f]),(0,c.jsx)(o.ThemeProvider,{theme:f.options.theme,children:(0,c.jsx)("div",{className:(0,r.A)(["redocusaurus","redocusaurus-operation",u?null:"hide-example"]),children:(0,c.jsx)(l.Section,{id:k.id,$underlined:!0,children:(0,c.jsx)(l.Operation,Object.assign({operation:k},g))})})})}},86700:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"reference/bpmn/bpmn-engine","title":"BPMN engine","description":"BPMN engine tries to adhere to the bpmn 2 specification and be compatible with Camunda 8.","source":"@site/docs/reference/bpmn/bpmn-engine.md","sourceDirName":"reference/bpmn","slug":"/reference/bpmn/bpmn-engine","permalink":"/reference/bpmn/bpmn-engine","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"BPMN","permalink":"/category/bpmn"},"next":{"title":"Supported elements","permalink":"/category/supported-elements"}}');var i=t(74848),a=t(28453);t(75434);const r={sidebar_position:1},o="BPMN engine",l={},d=[{value:"Storage",id:"storage",level:2},{value:"Node processing in the engine",id:"node-processing-in-the-engine",level:2},{value:"Execution Tokens",id:"execution-tokens",level:3},{value:"Exclusive Gateway example",id:"exclusive-gateway-example",level:3},{value:"Parallel Gateway example",id:"parallel-gateway-example",level:3},{value:"Interacting with the BPMN engine",id:"interacting-with-the-bpmn-engine",level:2},{value:"Business Key",id:"business-key",level:3},{value:"Workers",id:"workers",level:2},{value:"XML parser",id:"xml-parser",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"bpmn-engine",children:"BPMN engine"})}),"\n",(0,i.jsxs)(n.p,{children:["BPMN engine tries to adhere to the ",(0,i.jsx)(n.a,{href:"https://www.omg.org/spec/BPMN/2.0.2/PDF",children:"bpmn 2 specification"})," and be compatible with ",(0,i.jsx)(n.a,{href:"https://docs.camunda.io/",children:"Camunda 8"}),".\nThe engine can be used through the ZenBPM platform or as a ",(0,i.jsx)(n.a,{href:"https://pkg.go.dev/github.com/pbinitiative/zenbpm/pkg/bpmn",children:"standalone library"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The engine is fully instrumented via ",(0,i.jsx)(n.a,{href:"https://opentelemetry.io/",children:"OpenTelemetry"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tracing: Each process, token, and flow node has spans."}),"\n",(0,i.jsx)(n.li,{children:"Metrics: Tracks counts of started, ended processes, worker executions etc."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"storage",children:"Storage"}),"\n",(0,i.jsxs)(n.p,{children:["The engine uses a storage interface to interact with storage systems. ZenBPM platform implements a solution based on RqLite database. The codebase also provides a default implementation for in ",(0,i.jsx)(n.a,{href:"https://pkg.go.dev/github.com/pbinitiative/zenbpm/pkg/storage/inmemory",children:"memory storage"})," that is used by the engine's Unit tests."]}),"\n",(0,i.jsx)(n.h2,{id:"node-processing-in-the-engine",children:"Node processing in the engine"}),"\n",(0,i.jsx)(n.p,{children:"Internally the engine uses \"Tokens\" as a pointers that traverse the diagram and represent execution state.\nTokens are manipulated based on node logic (e.g., split for gateways, wait for messages/timers).\nOne loop through the engine's main loop means processing the token's flow node and outgoing sequence flows."}),"\n",(0,i.jsx)(n.h3,{id:"execution-tokens",children:"Execution Tokens"}),"\n",(0,i.jsx)(n.p,{children:"Tokens (ExecutionToken) track progress through flow nodes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Key"}),": Unique identifier."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ElementId"}),": ID of the current BPMN element."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"State"}),": Running, Waiting, Completed, Failed."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"exclusive-gateway-example",children:"Exclusive Gateway example"}),"\n",(0,i.jsx)(n.p,{children:"The following example shows processing of an Exclusive Gateway."}),"\n",(0,i.jsx)(n.mermaid,{value:'flowchart LR\n subgraph s1["Token execution"]\n        n0["Previous node"]\n        n1["Exclusive gateway"]\n        n2["Node2"]\n        n3["Node3"]\n  end\n    n0 --\x3e|Token key 42 running|n1\n    n1 L_n1_n2_0@--\x3e|Token key:42</br>state:running|n2\n    n1 --\x3e n3\n\n    n1@{ shape: diam}\n     n0:::Hidden\n     n2:::Hidden\n     n3:::Hidden\n    classDef Hidden stroke-width:1px, stroke-dasharray:none, opacity: 10%\n    linkStyle 0 opacity: 50%\n\n    L_n1_n2_0@{ animation: fast }'}),"\n",(0,i.jsx)(n.p,{children:"Since Exclusive Gateway cannot create parallel flows the token gets reused and continues to flow through the diagram."}),"\n",(0,i.jsx)(n.h3,{id:"parallel-gateway-example",children:"Parallel Gateway example"}),"\n",(0,i.jsx)(n.p,{children:"The following example shows processing of a Parallel Gateway."}),"\n",(0,i.jsx)(n.mermaid,{value:'flowchart LR\n subgraph s1["Token execution"]\n        n0["Previous node"]\n        n1["Parallel gateway"]\n        n2["Node2"]\n        n3["Node3"]\n  end\n    n0 L_n0_n1_0@--\x3e|Token key:42</br>state:completed|n1\n    n1 L_n1_n2_0@--\x3e|Token key:43</br>state:running|n2\n    n1 L_n1_n3_0@--\x3e|Token key:44</br>state:running|n3\n\n    n1@{ shape: diam}\n     n0:::Previous\n     n2:::Hidden\n     n3:::Hidden\n    classDef Hidden stroke-width:1px, stroke-dasharray:none, opacity: 10%\n    classDef Previous stroke-width:1px, stroke-dasharray:none, opacity: 50%\n    linkStyle 0 opacity: 50%\n\n    L_n1_n2_0@{ animation: fast }\n    L_n1_n3_0@{ animation: fast }'}),"\n",(0,i.jsx)(n.p,{children:"To keep track of the parallel executions the token that activated the gateway is completed and outgoing parallel flows get assigned a new tokens that each represents a parallel execution flow."}),"\n",(0,i.jsx)(n.h2,{id:"interacting-with-the-bpmn-engine",children:"Interacting with the BPMN engine"}),"\n",(0,i.jsx)(n.h3,{id:"business-key",children:"Business Key"}),"\n",(0,i.jsxs)(n.p,{children:["For the correlation of process instances to external business entities ",(0,i.jsx)(n.code,{children:"businessKey"})," attribute can optionally be used. This attribute allows you to efficiently identify the process instance which is associated with the business entity."]}),"\n",(0,i.jsxs)(n.p,{children:["For usage please see ",(0,i.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(72929).A+"",children:"OpenAPI"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"workers",children:"Workers"}),"\n",(0,i.jsx)(n.h2,{id:"xml-parser",children:"XML parser"}),"\n",(0,i.jsx)(n.p,{children:"TODO: add information about how we are parsing xml definitions of processes"})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},92441:()=>{},93290:()=>{}}]);