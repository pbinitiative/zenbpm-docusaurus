(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7356],{7411:()=>{},25399:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"reference/cluster","title":"Cluster","description":"ZenBPM uses raft as its consensus algorithm. Zen cluster consists of:","source":"@site/docs/reference/cluster.md","sourceDirName":"reference","slug":"/reference/cluster","permalink":"/zenbpm-docusaurus/reference/cluster","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"Reference","permalink":"/zenbpm-docusaurus/category/reference"},"next":{"title":"BPMN engine","permalink":"/zenbpm-docusaurus/reference/bpmn-engine"}}');var s=t(74848),i=t(28453);t(75434),t(72765);const o={sidebar_position:1},a="Cluster",c={},l=[{value:"Main cluster",id:"main-cluster",level:2},{value:"Partition clusters",id:"partition-clusters",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"cluster",children:"Cluster"})}),"\n",(0,s.jsx)(n.p,{children:"ZenBPM uses raft as its consensus algorithm. Zen cluster consists of:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Main raft cluster serves the purpose of keeping track of the state of the cluster across multiple instances of the application."}),"\n",(0,s.jsx)(n.li,{children:"RqLite cluster groups provide storage layer for the application."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"main-cluster",children:"Main cluster"}),"\n",(0,s.jsx)(n.mermaid,{value:'flowchart LR\n\nsubgraph s1["Main Zen cluster"]\n  subgraph Node3["Node 3"]\n    end\n  subgraph Node2["Node 2"]\n    end\n  subgraph Node1["Node 1"]\n    end\nend\nNode1 --\x3e Node2 & Node3\nNode3 --\x3e Node2 & Node1\nNode2 --\x3e Node3 & Node1'}),"\n",(0,s.jsx)(n.p,{children:"Instances of the application are connected through the internal GRPC api and when an event that concerns cluster state happens leader node is notified and updates the state of the cluster through raft.\nThe state of the cluster can be queried through the system API:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["REST: ",(0,s.jsx)(n.code,{children:"/system/status"})]}),"\n",(0,s.jsx)(n.li,{children:"GRPC: TODO: add grpc endpoint as well"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"partition-clusters",children:"Partition clusters"}),"\n",(0,s.jsxs)(n.p,{children:["Partition clusters are smaller ",(0,s.jsx)(n.a,{href:"https://rqlite.io/",children:"RqLite"})," clusters created for data storage of each partition."]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Current theoretical limit for partitions is 122 due to network multiplexer implementation."})}),"\n",(0,s.jsx)(n.admonition,{title:"Future plans",type:"note",children:(0,s.jsxs)(n.p,{children:["You can specify how many partitions and partition replicas will be created through the ",(0,s.jsx)(n.a,{href:"/reference/configuration",children:"application configuration"}),". After the cluster has been created you can modify these through ",(0,s.jsx)(n.a,{href:"/reference/zenctl",children:"zenctl"})," cli that is used to manage Zen clusters."]})}),"\n",(0,s.jsx)(n.admonition,{title:"Future plans",type:"note",children:(0,s.jsxs)(n.p,{children:["You can query each partition database through the ",(0,s.jsx)(n.code,{children:"zenctl"})," or public REST/GRPC API"]})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{"use strict";t.d(n,{R:()=>o,x:()=>a});var r=t(96540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},28825:()=>{},67992:()=>{},72765:(e,n,t)=>{"use strict";t.d(n,{A:()=>h});var r=t(98587),s=t(96540),i=t(37911),o=t(33540),a=(t(94878),t(28794)),c=t(99563),l=t(2151),d=t(74848),u=["id","spec","pointer","showExample","example"];const h=function(e){var n=e.id,t=e.spec,h=e.pointer,p=e.showExample,f=void 0!==p&&p,m=e.example,x=void 0===m?f:m,j=(0,r.A)(e,u),g=(0,l.p)(n,t),v=(0,c.r)(g).store;return(0,s.useEffect)((function(){v.menu.dispose()}),[v]),(0,d.jsx)(o.ThemeProvider,{theme:v.options.theme,children:(0,d.jsx)("div",{className:(0,i.A)(["redocusaurus","redocusaurus-schema",x?null:"hide-example"]),children:(0,d.jsx)(a.SchemaDefinition,Object.assign({parser:v.spec.parser,options:v.options,schemaRef:h,showExample:x},j))})})}},75434:(e,n,t)=>{"use strict";t.d(n,{A:()=>h});var r=t(98587),s=t(96540),i=t(2151),o=t(37911),a=t(33540),c=(t(94878),t(28794)),l=t(99563),d=t(74848),u=["id","spec","example","pointer"];const h=function(e){var n=e.id,t=e.spec,h=e.example,p=void 0!==h&&h,f=e.pointer,m=(0,r.A)(e,u),x=(0,i.A)(n,t),j=(0,l.r)(x).store,g="#"===f.charAt(0)?f.substring(1):f,v=j.menu.flatItems.find((function(e){return e instanceof c.OperationModel&&e.pointer===g}));if(!v)throw new Error('Failed to resolve reference "'+f+'"');return(0,s.useEffect)((function(){j.menu.dispose()}),[j]),(0,d.jsx)(a.ThemeProvider,{theme:j.options.theme,children:(0,d.jsx)("div",{className:(0,o.A)(["redocusaurus","redocusaurus-operation",p?null:"hide-example"]),children:(0,d.jsx)(c.Section,{id:v.id,$underlined:!0,children:(0,d.jsx)(c.Operation,Object.assign({operation:v},m))})})})}},92441:()=>{},93290:()=>{}}]);